<h1>An async HTTP transaction, part 3</h1>

<p>In this blog post I will further extend my Node.js implementation of D&amp;B Direct+ identity resolution functionality. I will do so by adding a <a href="https://www.promisejs.org/" title="Introduction to JavaScript promises">JavaScript promise</a> to the mix. JavaScript promises were introduced to reduce the complexity of writing asynchronous code. A promise represents the result of an async operation and, by design, has just one of three states:</p>

<ul>
   <li>pending</li>
   <li>fulfilled</li>
   <li>rejected</li>
</ul>

<p>Once a promise is either fulfilled or rejected, it can never change state again.</p>

<p>In this version of the code I instantiate a new Promise object using the new keyword and the object's constructor: <code>return new Promise((resolve, reject) => { ...</code> The constructor takes as its argument a(n arrow) function which takes two functions as parameters. The first of these, resolve, is called when the asynchronous task completes successfully and returns the results of the task as a value. In the code below the result of the task is the string value of the name of the first match candidate generated by the API. The second function, reject, is called when the task fails and returns the reason for failure as an error object.</p>

<script src="https://gist.github.com/hdr1001/e234672f9a6ee787f3b0acbe552d5052.js" type="text/javascript"></script>

<p>The then method of a promise instance is one of the main reasons why working with promises is so easy. This method takes as its first argument a function that will be passed the resolved value of the promise instance once fulfilled. This explains how variable sName in the statement: <code>resolve(sName);</code> is transferred to function argument res in the statement: <code>get_1st_mc_name_async({name: 'Agglo', ... }).then(res => { ...</code> At this stage it's interesting to have another look at the <a href="https://gist.github.com/hdr1001/fc3347c839c3f9c5bbc20d751cf5fbf7" title="Synchronous Node.js D&amp;B Direct+ identity resolution request">synchronous version</a> of the code I developed <a href="#" title="Synchronous IDR" onclick="navBlog.anchorAction(event, 'dont_do_this.xhtml')">a few weeks ago</a> to see how close the logical flow of that particular version of the code resembles the code above.</p>

<p>I would like to refer you to <a href="https://gist.github.com/hdr1001/76a8d42d69d7259e18c55557d4e462f7/revisions?diff=split" title="Overview of revision to revision code changes">this page</a> on GitHub for more insight into my incremental code changes.</p>
