<h1>Don't try this @ work</h1>

<p>When working with Node.js it's always good to remember that Node.js operates on just a single thread. Even though, at first glance, this may seem limiting, the JavaScript runtime can support tens of thousands concurrent connections. This feat can only be accomplished though if non-blocking I/O calls are used religiously. Please read <a href="https://www.codeschool.com/blog/2014/10/30/understanding-node-js/" title="Understanding Node.js">Understanding Node.js</a> for a more in-depth but still very easy to understand explanation of these concepts.</p>

<p>Notwithstanding the fact that I'm fully aware that Node.js applications should use non-blocking, asynchronous I/O, I will, in this post, implement a <a href="https://github.com/ForbesLindesay/sync-request" title="Make synchronous web requests">synchronous version</a> of a D&amp;B Direct+ identity resolution call. The reason behind this is that, especially for people coming from other programming paradigms, the resulting example code is, in my opinion, the most easy to understand.</p>

<script src="https://gist.github.com/hdr1001/fc3347c839c3f9c5bbc20d751cf5fbf7.js" type="text/javascript"></script>

<p>So, focusing on the code which is executed once initialisation is complete (function after_ini_test), I have devised a function which, in a synchronous way, returns the name of the first match candidate generated by D&amp;B. At the top of function get_1st_mc_name_sync the relevant URL and HTTP headers are set. Important to note is that the query parameters are passed into the function and the Authorization header is set based on previously developed <a href="http://hdr.is-a-geek.com/svn/dnbdpl/node.js/dnb_dpl_objs.js" title="D&B Direct+ API object code">object code</a>. Then function syncReq is called to trigger the <a href="https://directplus.documentation.dnb.com/docs/apis/identity-resolution/versions/1#request" title="D&amp;B Direct+ IDR request">request</a> &amp; <a href="https://directplus.documentation.dnb.com/docs/apis/identity-resolution/versions/1#response" title="D&amp;B Direct+ IDR response">response</a> interaction with the Direct+ API. Because this is done synchronously it's possible to, in the next line of code, obtain the JSON returned (invocation of method getBody) and parse the result. As a last step the requested piece of information is returned.</p>

<p>Below a screenshot of the results of running the code:</p>

<p><img src="/dev/blog/imgs/idr_sync_req.png" alt="Result synchronous IDR request" /></p>

<p>The purpose of the exercise above was to explain the basic anatomy of a D&amp;B Direct+ call. As mentioned before I'm aware that the code above violates best programming practices. I will correct this in my <a class="blog_next" href="#" title="Next blog post">next</a> blog post. Stay tuned!</p>

