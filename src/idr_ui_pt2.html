<h1>IDR UI, client-side JavaScript</h1>

<p>In my <a class="blog_prev" href="./prev" title="Previous blog post">previous post</a> I started the development of a User Interface (UI) on top of D&amp;B's <a href="https://directplus.documentation.dnb.com/openAPI.html?apiID=IDRCleanseMatch" title="Identity Resolution">Direct+ IDentity Resolution (IDR)</a> functionality. This first effort contained no client-side JavaScript. In this post I will explain how I moved from a 100% HTML based approach to an implementation in which (1) the IDR search criteria form is created dynamically using the <a href="https://www.w3schools.com/js/js_htmldom.asp" title="Introduction of JavaScript HTML DOM">Document Object Model (DOM)</a> and (2) form submission is handled in JavaScript as well.</p>

<p>The HTML test page, in <a href="http://hdr.is-a-geek.com/svn/dnbdpl/ui/test_page.html?p=15" title="HTML test page">this version</a>, no longer contains any form elements. However, it does contain a paragraph with an attribute id <i>e_before_form</i>. When event <a href="https://developer.mozilla.org/en-US/docs/Web/Events/DOMContentLoaded" title="DOMContentLoaded">DOMContentLoaded</a> fires the form is inserted, on the fly, into the page immediately after this paragraph:</p>

<p><img src="/dev/blog/imgs/idr_dom_load.png" alt="Code to dynamically add the HTML form to the test page" /></p>

<p>Function <a href="http://hdr.is-a-geek.com/svn/dnbdpl/ui/dnb_frm_idr.js?p=15" title="Client-side IDR JavaScript code">createDnbDplFormIDR</a> actually contains the JavaScript DOM manipulation code. For this particular version of the code my aim was to replace the previously statically implemented HTML form controls with their dynamically created equivalents. <a href="https://www.tablotv.com/sf/uploads/easy_peasy.gif" title="Easy-peasy">Easy-peasy, lemon squeezy</a>.</p>

<p>The other thing now handled in client-side JavaScript is the submission of the form for further processing. For this particular event I also created a so-called EventListner:</p>

<p><img src="/dev/blog/imgs/idr_submit_form_evnt.png" alt="Form submit event listner" /></p>

<p>Function handleDnbDplIdrFormSubmit (part of <a href="http://hdr.is-a-geek.com/svn/dnbdpl/ui/dnb_frm_idr.js?p=15" title="Client-side IDR JavaScript code">dnb_frm_idr.js</a>) is invoked when a user clicks the submit button. In turn an <a href="http://bit.ly/2xomMZV" title="Loading JSON-formatted data with Ajax">XmlHttpRequest</a> is initiated from this function. The HTTP request is a POST transaction which is picked up by my <a href="#" title="Custom web service for class DplIDR" onclick="navBlog.anchorAction(event, 'idr_ws_pt3.xhtml')">customised Node.JS IDR web service</a>. At this stage I do very little with the data returned. I only show the total number of match candidates generated, the ID associated with the relevant row on the database &amp; the primary name of the first match candidate.</p>

<p><img src="/dev/blog/imgs/idr_html_js_ui.gif" alt="IDR UI incl client-side JS in action" /></p>

<p>To conclude I briefly want to mention that the code repository now also contains <a href="https://docs.dnb.com/direct/2.0/en-US/onboard-rest-API" title="D&amp;B Direct Onboard API">D&amp;B Direct 2.0 Onboard</a> code. The JavaScript file in question, <a href="http://hdr.is-a-geek.com/svn/dnbdpl/node.js/dnb_d2o_objs.js" title="Node.js implementation of the D&B Direct 2.0 Onboard API">dnb_d2o_objs.js</a>, is dedicated to the memory of David Declercq. David recently suddenly <a href="https://www.linkedin.com/feed/update/urn:li:activity:6444969284107067392" title="Notice of David's death on LinkedIn">passed away</a>. I was, of course, in shock when the news of his death reached me. The following days I sometimes had a hard time to focus on my work and I found consolation in writing the Direct 2.0 Onboard code because this is very much linked to the subject matter on which we cooperated most frequently. Miss you David, rest in peace.</p>
