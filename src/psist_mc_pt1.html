<h1>Persist match candidate, CORS</h1>

<p>In my <a class="blog_prev" href="./prev" title="Previous blog post">previous post</a> I described how I use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" title="Mozilla Dev Network Fetch API guide">Fetch API</a> to retrieve <a href="https://bit.ly/3gAhuzq" title="D&amp;B IDentity Resolution">match candidates</a> from the <a href="https://bit.ly/3fj3NnS" title="API Hub, request, persist &amp; respond">API Hub</a> hosted on my <a href="https://bit.ly/2WdumUg" title="">Raspberry Pi</a>. I did not mention though that, while implementing the necessary code, I ran into <a href="https://mzl.la/2AQTJDn" title="CORS">Cross-Origin Resource Sharing</a> errors. CORS is defined as follows on the Mozilla Developer Network;</p>

<blockquote cite="https://mzl.la/2AQTJDn"><div><b>Cross-Origin Resource Sharing</b> (CORS) is a mechanism that uses additional HTTP headers to tell browsers to give a web application running at one origin, access to selected resources from a different origin. A web application executes a cross-origin HTTP request when it requests a resource that has a different origin (domain, protocol, or port) from its own.</div></blockquote>

<p>I host my <a href="https://bit.ly/2TTSoC4" title="React based UI for API Hub (v3x)">React web application</a> on my PC using a <a href="https://bit.ly/3eiO5aF" title="So what is webpack dev server?">Webpack Dev Server</a>;</p>

<p class="img_caption"><img style="max-width:80%" src="/dev/blog/imgs/dev_server_ui.jpg" alt="Webpack development server" /></p>

<p>Of course the Raspberry Pi on which I host the <a href="https://bit.ly/3fj3NnS" title="API Hub Request Persist Respond v3x">API Hub</a> component of the application represents a completely different origin;</p>

<p class="img_caption"><img style="max-width:60%" src="/dev/blog/imgs/api_hub_rpi.jpg" alt="API Hub hosted on different origin" /></p>

<p>The CORS errors generated by the browser therefore did not come as a surprise to me especially because I had to deal with similar issues (at that time <a href="https://enable-cors.org/server_apache.html" title="https://enable-cors.org/server_apache.html">on Apache</a>) before. In <a href="https://expressjs.com/" title="Fast, unopinionated, minimalist web framework for Node.js">Express</a> the simplest way to allow cross-origin requests is to install the <a href="https://www.npmjs.com/package/cors" title="Enable CORS on Express">cors npm module</a> and use it as middleware. I implemented the necessary code in two steps (<a href="https://bit.ly/2CCdKy8" title="Enabled CORS on my Express server">here</a> &amp; <a href="https://bit.ly/2OurcXb" title="Enabled HTTP headers using CORS middleware">here</a>) because it came as a surprise to me that I also had to make my custom HTTP headers (explicitly) available for cross-origin access. I could have avoided this if I had read <a href="https://github.com/alexishevia" title="Alexis Hevia">Alexis Hevia's</a> excellent article titled "<a href="https://bit.ly/2MHOCHG" title="Using CORS in Express">Using CORS in Express</a>" immediately from beginning to end but, as these things go, I only read the section "sending custom headers" when I noticed I could not access my custom header X-DNB-DPL-IDR-ID.</p>

